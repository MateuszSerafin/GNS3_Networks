There is an issue with tpm on gns, It took me a while to find it basically what is happening is that args to qemu are correct in my case it was
/usr/bin/qemu-system-x86_64 -name efi -m 4096M -smp cpus=3,sockets=1 -enable-kvm -machine smm=off -boot order=c -drive if=pflash,format=raw,readonly,file=/mnt/2tb/Projects/GNS/images/QEMU/OVMF_CODE.fd -drive if=pflash,format=raw,file=/mnt/2tb/Projects/GNS/projects/e0f43070-576f-4a97-a68b-3e864c53ce7d/project-files/qemu/fe289b94-487c-449c-be3d-ab9014315e55/OVMF_VARS.fd -cdrom /mnt/2tb/Projects/GNS/images/QEMU/windows10.iso -drive file=/mnt/2tb/Projects/GNS/projects/e0f43070-576f-4a97-a68b-3e864c53ce7d/project-files/qemu/fe289b94-487c-449c-be3d-ab9014315e55/hda_disk.qcow2,if=ide,index=0,media=disk,id=drive0 -uuid fe289b94-487c-449c-be3d-ab9014315e55 -vnc 0.0.0.0:0 -monitor tcp:127.0.0.1:38431,server,nowait -net none -device e1000,mac=0c:28:9b:94:00:00,netdev=gns3-0 -netdev socket,id=gns3-0,udp=127.0.0.1:10577,localaddr=127.0.0.1:10576 -chardev socket,id=chrtpm,path=/tmp/mytpm1/swtpm.sock -tpmdev emulator,id=tpm0,chardev=chrtpm -device tpm-tis,tpmdev=tpm0 --machine pc-q35-4.0 --vga qxl -bios /usr/share/ovmf/x64/OVMF.fd -machine usb=on -device usb-tablet
It looks correct even on wiki it seems reasonable by playing around with it i have found out that OVMF files are not working
456a77eecdba67a49c63075004844b425eae1056dc65001f6afe48f81381df6f3687abeef8d3dcac33c4ab4b7eacaff9118984e67b8c95dba614cf3480f01ac1  /mnt/2tb/Projects/GNS/images/QEMU/OVMF_CODE.fd
ed58b67db46fd9f7fa1a9e07bcc03bc572765f30df7639972e3f1ac90d7595f140a412cd7d36f64110137255a5d24acbbd9f2e79a61582013da9768de358cf22  /usr/share/edk2/x64/OVMF_CODE.fd
The signatures are different for other files file too. After changing the paths i was able to use tpm normally without issues which is weird but not surprising.
Without change there was an error with tpm in device manager that the device could not start because of protocol issue (code 10).
WARNING if you look at correct_settings_gns.png you can see that uefi boot is disabled however due to my arguments being passed to qemu it's actually booting as uefi. So it's uefi but without gns adding weird flags to command line
